He claims that the Massachusetts ruling was based on a provision prohibiting discrimination based on sexual preference which is not found in the federal constitution , but later admits that he was in error and that it was based on prohibiting discrimination based on sex .